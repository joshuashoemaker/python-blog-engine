<div class="row">
  <div data-post-id="{{id}}" class="post col-md-8">
    <div class="post-heading">
      <div class="post-title">
        <a href="/blog/{{id}}"> {{p.subject}} </a> <span><small>by:
          <a href="/?user={{p.authorId}}"> {{p.authorName}}</a></small></span>
      </div>

      <div class="post-date">
        {{p.created.strftime("%b %d, %Y")}}
      </div>
    </div>

    <div class="post-content">
      {{p._render_text | safe}}
    </div>

    <span class="score">
      score = {{count}}
    </span>
    
    <div class="post-buttons">
      <form id="delete-form-{{id}}" method="POST" action="/blog/delete">
        <input type="hidden" name="post_id" value="{{id}}">
        <input type="hidden" name="author_id" value="{{p.authorId}}">
        <a id="delete-button-{{id}}" class="glyphicon glyphicon-remove"></a>
      </form>
      | 
      <form id="edit-form-{{id}}" method="POST" action="/blog/editpost">
        <input type="hidden" name="post_id" value="{{id}}">
        <input type="hidden" name="author_id" value="{{p.authorId}}">
        <input type="hidden" name="subject" value="{{p.subject}}">
        <input type="hidden" name="content" value="{{p._render_text}}">
        <a id="edit-button-{{id}}" class="glyphicon glyphicon-pencil"></a>
      </form>
      |
      <form id="like-form-{{id}}" method="POST" action="/blog/vote">
        <input type="hidden" name="score" value="1">
        <input type="hidden" name="post_id" value="{{id}}">
        <input type="hidden" name="author_id" value="{{p.authorId}}">
        <a id="like-button-{{id}}" class="glyphicon glyphicon-plus"></a>
      </form>
      | 
      <form id="dislike-form-{{id}}" method="POST" action="/blog/vote">
        <input type="hidden" name="score" value="-1">
        <input type="hidden" name="post_id" value="{{id}}">
        <input type="hidden" name="author_id" value="{{p.authorId}}">
        <a id="dislike-button-{{id}}" class="glyphicon glyphicon-minus"></a>
      </form>
    </div>

      <div class="comment-wrapper container">
        {% for comment in comments %}
        <div class="row">
          <div class="comment col-md-6">
            from <a href="/?user={{p.authorId}}" class="commenter-name">{{comment.commenter_name}}</a>
            <p class="comment-content">{{comment.comment}}</p>
          </div>
        </div>

        {% endfor %}
      </div>

      <div class="comment-input well"  class="input-group">
        <form method="POST" action="/blog/comment">
          <textarea name="comment" required class="form-control" rows="3" placeholder="Write a comment..."></textarea>
          <input name="author_id" type="hidden" value="{{p.authorId}}">
          <input name="post_id" type="hidden" value="{{id}}">
          <input class="btn btn-primary " type="submit" value="comment">
        </form>
      </div>

  <script>
    $(document).ready(function(){

      var $likeForm{{id}} = $("#like-form-{{id}}");
      var $likeButton{{id}} = $("#like-button-{{id}}");
      var $dislikeForm{{id}} = $("#dislike-form-{{id}}");
      var $dislikeButton{{id}} = $("#dislike-button-{{id}}");
      var $editForm{{id}} = $("#edit-form-{{id}}");
      var $editButton{{id}} = $("#edit-button-{{id}}");
      var $deleteForm{{id}} = $("#delete-form-{{id}}");
      var $deleteButton{{id}} = $("#delete-button-{{id}}");

      $likeButton{{id}}.click(function(e){
        e.preventDefault();
        $likeForm{{id}}.submit();
      });

      $dislikeButton{{id}}.click(function(e){
        e.preventDefault();
        $dislikeForm{{id}}.submit();
      });

      $editButton{{id}}.click(function(e){
        e.preventDefault();
        $editForm{{id}}.submit();
      });

      $deleteButton{{id}}.click(function(e){
        e.preventDefault();
        $deleteForm{{id}}.submit();
      });
    });
  </script>

</div>